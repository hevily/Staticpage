<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <link rel="stylesheet" type="text/css" href="../css/normalize.min.css" />
    <link rel="stylesheet" type="text/css" href="../js/Text-Input-Effects/css/component.css" />
    <link rel="stylesheet" type="text/css" href="../css/preview-membercard.css" />
	<link rel="stylesheet" type="text/css" href="../js/spectrum/spectrum.min.css" />
	<link rel="stylesheet" type="text/css" href="../js/selectpick/selectpick.css">
	<title>会员卡模板页</title>
	<style type="text/css">
	</style>
</head>
<body>
	<!-- 后期规划使用 -->
		<div class="container">
			<!-- 选择文字摆放位置 -->
			<div class="section make-card-face">
				<h3 class="step">1、<span>输入文字-选择颜色-设置字号<small><em></em></small></span></h3>
				<div class="nine-grid clearfix">
					<div class="three-grid" id="top-text">
						<div class="grid-input grid-input1">
							<select class="select select-fz1" id="select-fz1">
								<option value="">12</option>
								<option value="">13</option>
								<option value="" selected="selected">14</option>
								<option value="">15</option>
								<option value="">16</option>
								<option value="">17</option>
								<option value="">18</option>
								<option value="">19</option>
								<option value="">20</option>
								<option value="">21</option>
								<option value="">22</option>
								<option value="">23</option>
								<option value="">24</option>
								<option value="">25</option>
								<option value="">26</option>
								<option value="">27</option>
								<option value="">28</option>
							</select>
							<span class="colorpicker"></span>
							<input type="text" name="" class="text-color-fz" placeholder="请输入">
						</div>
						<div class="grid-input grid-input2">
							<select class="select select-fz2" id="select-fz2">
								<option value="">12</option>
								<option value="">13</option>
								<option value="" selected="selected">14</option>
								<option value="">15</option>
								<option value="">16</option>
								<option value="">17</option>
								<option value="">18</option>
								<option value="">19</option>
								<option value="">20</option>
								<option value="">21</option>
								<option value="">22</option>
								<option value="">23</option>
								<option value="">24</option>
								<option value="">25</option>
								<option value="">26</option>
								<option value="">27</option>
								<option value="">28</option>
							</select>
							<span class="colorpicker"></span>
							<input type="text" name="" class="text-color-fz" placeholder="请输入">
						</div>
						<div class="grid-input grid-input3">
						<span class="colorpicker"></span>
						<select class="select select-fz3" id="select-fz3">
								<option value="">12</option>
								<option value="">13</option>
								<option value="" selected="selected">14</option>
								<option value="">15</option>
								<option value="">16</option>
								<option value="">17</option>
								<option value="">18</option>
								<option value="">19</option>
								<option value="">20</option>
								<option value="">21</option>
								<option value="">22</option>
								<option value="">23</option>
								<option value="">24</option>
								<option value="">25</option>
								<option value="">26</option>
								<option value="">27</option>
								<option value="">28</option>
							</select>
						<input type="text" name="" class="text-color-fz" placeholder="请输入">
						</div>
					</div>
					<div class="three-grid" id="middle-text">
						<div class="grid-input grid-input4">
						<span class="colorpicker"></span>
						<select class="select select-fz4" id="select-fz4">
								<option value="">12</option>
								<option value="">13</option>
								<option value="" selected="selected">14</option>
								<option value="">15</option>
								<option value="">16</option>
								<option value="">17</option>
								<option value="">18</option>
								<option value="">19</option>
								<option value="">20</option>
								<option value="">21</option>
								<option value="">22</option>
								<option value="">23</option>
								<option value="">24</option>
								<option value="">25</option>
								<option value="">26</option>
								<option value="">27</option>
								<option value="">28</option>
							</select>
						<input type="text" name="" class="text-color-fz" placeholder="请输入">
						</div>
						<div class="grid-input grid-input5">
							<select class="select select-fz5" id="select-fz5">
								<option value="">12</option>
								<option value="">13</option>
								<option value="" selected="selected">14</option>
								<option value="">15</option>
								<option value="">16</option>
								<option value="">17</option>
								<option value="">18</option>
								<option value="">19</option>
								<option value="">20</option>
								<option value="">21</option>
								<option value="">22</option>
								<option value="">23</option>
								<option value="">24</option>
								<option value="">25</option>
								<option value="">26</option>
								<option value="">27</option>
								<option value="">28</option>
							</select>
							<span class="colorpicker"></span>
							<input type="text" name="" class="text-color-fz" placeholder="请输入">
						</div>
						<div class="grid-input grid-input6">
						<span class="colorpicker"></span>
						<select class="select select-fz6" id="select-fz6">
								<option value="">12</option>
								<option value="">13</option>
								<option value="" selected="selected">14</option>
								<option value="">15</option>
								<option value="">16</option>
								<option value="">17</option>
								<option value="">18</option>
								<option value="">19</option>
								<option value="">20</option>
								<option value="">21</option>
								<option value="">22</option>
								<option value="">23</option>
								<option value="">24</option>
								<option value="">25</option>
								<option value="">26</option>
								<option value="">27</option>
								<option value="">28</option>
							</select>
						<input type="text" name="" class="text-color-fz" placeholder="请输入">
						</div>
					</div>
					<div class="three-grid" id="bottom-text">
						<div class="grid-input grid-input7">
						<span class="colorpicker"></span>
						<select class="select select-fz7" id="select-fz7">
								<option value="">12</option>
								<option value="">13</option>
								<option value="" selected="selected">14</option>
								<option value="">15</option>
								<option value="">16</option>
								<option value="">17</option>
								<option value="">18</option>
								<option value="">19</option>
								<option value="">20</option>
								<option value="">21</option>
								<option value="">22</option>
								<option value="">23</option>
								<option value="">24</option>
								<option value="">25</option>
								<option value="">26</option>
								<option value="">27</option>
								<option value="">28</option>
							</select>
						<input type="text" name="" class="text-color-fz" placeholder="请输入">
						</div>
						<div class="grid-input grid-input8">
							<select class="select select-fz8" id="select-fz8">
								<option value="">12</option>
								<option value="">13</option>
								<option value="" selected="selected">14</option>
								<option value="">15</option>
								<option value="">16</option>
								<option value="">17</option>
								<option value="">18</option>
								<option value="">19</option>
								<option value="">20</option>
								<option value="">21</option>
								<option value="">22</option>
								<option value="">23</option>
								<option value="">24</option>
								<option value="">25</option>
								<option value="">26</option>
								<option value="">27</option>
								<option value="">28</option>
							</select>
							<span class="colorpicker"></span>
							<input type="text" name="" class="text-color-fz" placeholder="请输入">
						</div>
						<div class=" grid-input grid-input9">
						<span class="colorpicker"></span>
						<select class="select select-fz9" id="select-fz9">
								<option value="">12</option>
								<option value="">13</option>
								<option value="" selected="selected">14</option>
								<option value="">15</option>
								<option value="">16</option>
								<option value="">17</option>
								<option value="">18</option>
								<option value="">19</option>
								<option value="">20</option>
								<option value="">21</option>
								<option value="">22</option>
								<option value="">23</option>
								<option value="">24</option>
								<option value="">25</option>
								<option value="">26</option>
								<option value="">27</option>
								<option value="">28</option>
							</select>
						<input type="text" name="" class="text-color-fz" placeholder="请输入">
						</div>
					</div>
				</div>
				<div class="code-result">
					<h3 class="step">2、<span>示例以iphone6/iphone6s/iphone7 为基准</span>
					</h3>
					<div class="preview-card">
						<div class="credit-card-module positioned-by-module ">
							<div class="card-bg-img">
								<img src="../img/card-1.png" alt="卡面背景图片">
							</div>
							<div class="card-top-text">
<div class="text-position text-top">
上部文字
</div>
<div class="text-position text-middle">
中部文字
</div>
<div class="text-position text-bottom">
底部文字
</div></div>
						</div>
					</div>
					<h3 class="step" >3、<span>复制以下内容粘贴到编辑页面</span>
					<button class="copy" data-clipboard-action="copy" data-clipboard-target="#code-text">复制到剪贴板</button></h3>
					<textarea id="code-text">生成的代码在这里</textarea>
				</div>

			</div>
			<!-- 预览会员卡 -->
		</div>
	<!-- 后期规划使用 end-->
	<script src="https://staticcdn.yshjie.com/cdn/librarypath/jquery/jquery-2.1.3.min.js"></script>
	<script src="../js/Text-Input-Effects/js/classie.js"></script>
	<script src="../js/spectrum/spectrum.min.js"></script>
	<script src='../js/clipboard.min.js'></script>
	<script src="../js/layer/layer.js"></script>
	<script src="../js/selectpick/selectpick.js"></script>
	<script type="text/javascript">
		$(function () {
			(function() {
						$('.select-text-position label').click(function() {
							uploadView()
						});
						var copy = new Clipboard('.copy');
						copy.on('success', function(e) {
						    layer.msg('已复制');
						})
						copy.on('error', function(e) {
						    console.error('Action:', e.action);
						    console.error('Trigger:', e.trigger);
						    layer.msg('请手动使用Ctrl+C进行复制')
						});

						$(".colorpicker").spectrum({
							showInput: true,
						    showPaletteOnly: true,
						    togglePaletteOnly: true,
						    togglePaletteMoreText: 'more',
						    togglePaletteLessText: 'less',
						    color: '#000',
						    palette: [
						    	['#FBD538','#E0DCD8'],
						        ["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],
						        ["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],
						        ["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],
						        ["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],
						        ["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],
						        ["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],
						        ["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],
						        ["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]
						    ],
						    change: function(color) {
						        color.toHexString(); // #ff0000
						        $(this).css('background-color',color)
						        // console.log($(this))
						        $(this).next('.text-color-fz').css('color',color)
					        	$(this).closest('.grid-input').find('.text-color-fz').css('color',color)
					        	uploadView()
						    }
						});
						var settings = {
						    container:".perselect",//模拟select生成的DIV存放的父容器     
						        height: 30, // 下拉框的高度
						        width: 150, // 下拉框的宽度
						        disabled: false, // 是否禁用,默认false不禁用
						        onSelect: "", // 点击后选中回调函数
						        onSelect: function(value,text){
									// alert("这是回调函数，选中的值："+value+" \n选中的下拉框文本："+text)
									var size = parseInt(text);
									setFont(size)
								}
							}
						var settings1 = {
						   container:".grid-input1",height: 40,width: 40,disabled: false,onSelect: "",onSelect: function(value,text){
									var _this = $(this),size = parseInt(text);
									setFont(size,_this)
								}
							}
						var settings2 = {
						    container:".grid-input2",height: 40,width: 40,disabled: false,onSelect: function(value,text){
									var _this = $(this),size = parseInt(text);
									setFont(size,_this)
								}
							}
						var settings3 = {
						    container:".grid-input3",height: 40,width: 40,disabled: false,onSelect: "",onSelect: function(value,text){
									var _this = $(this),size = parseInt(text);
									setFont(size,_this)
								}
							}
						var settings4 = {
						    container:".grid-input4",height: 40,width: 40,disabled: false,onSelect: "",onSelect: function(value,text){
									var _this = $(this),size = parseInt(text);
									setFont(size,_this)
								}
							}
						var settings5 = {
						    container:".grid-input5",height: 40,width: 40,disabled: false,onSelect: "",onSelect: function(value,text){
									var _this = $(this),size = parseInt(text);
									setFont(size,_this)
								}
							}
						var settings6 = {
						    container:".grid-input6",height: 40,width: 40,disabled: false,onSelect: "",onSelect: function(value,text){
									var _this = $(this),size = parseInt(text);
									setFont(size,_this)
								}
							}
						var settings7 = {
						    container:".grid-input7",height: 40,width: 40,disabled: false,onSelect: "",onSelect: function(value,text){
									var _this = $(this),size = parseInt(text);
									setFont(size,_this)
								}
							}
						var settings8 = {
						    container:".grid-input8",height: 40,width: 40,disabled: false,onSelect: "",onSelect: function(value,text){
									var _this = $(this),size = parseInt(text);
									setFont(size,_this)
								}
							}
						var settings9 = {
						    container:".grid-input9",height: 40,width: 40,disabled: false,onSelect: "",onSelect: function(value,text){
						    		var _this = $(this),size = parseInt(text);
									setFont(size,_this)
								}
							}

						function setFont(size,_this) {
							var _this = $(_this)[0].container
							console.log()
							$(_this).find('.text-color-fz').css('font-size',size)
							uploadView()
						}

						$(".select-fz1").selectpick(settings1)
						$(".select-fz2").selectpick(settings2)
						$(".select-fz3").selectpick(settings3)
						$(".select-fz4").selectpick(settings4)
						$(".select-fz5").selectpick(settings5)
						$(".select-fz6").selectpick(settings6)
						$(".select-fz7").selectpick(settings7)
						$(".select-fz8").selectpick(settings8)
						$(".select-fz9").selectpick(settings9)
						$('.text-color-fz').blur(function () {
							uploadView()
						})

						function uploadView() {
							var topTextA = $('#top-text').find('.text-color-fz'),
								middleTextA = $('#middle-text').find('.text-color-fz'),
								bottomTextA = $('#bottom-text').find('.text-color-fz')
							var html = ''

							
							getText('text-top',topTextA)
							// console.log(getText('text-top',topTextA))
							
							getText('text-middle',middleTextA)
							// console.log(getText('text-middle',middleTextA))
							
							getText('text-bottom',bottomTextA)
							// console.log(getText('text-bottom',bottomTextA))
							// get text
							function getText(v,goal) {
								var text = []
								$(goal).each(function (index,el) {
									text.push(goal.eq(index).val())
								})
								setText(v,text)
								console.log(text)
								return html;
							}
							// console.log(html)
							function setText(goal,text) {
								var poC = '',curText = '';
								if (goal == 'text-top') {
									poC = 'text-top'
								}else if(goal == 'text-middle'){
									poC = 'text-middle'
								}else if( goal == 'text-bottom'){
									poC = 'text-bottom'
								}
								if (text == '' || text == undefined ) {
									return ;
								}
								text1 = '<span class="text-left text-color-set">'+text[0]+'</span>'
								text2 = '<span class="text-center text-color-set">'+text[1]+'</span>'
								text3 = '<span class="text-right text-color-set">'+text[2]+'</span>'

								curText = text1 + text2 +text3
								html += '<div class="text-position '+poC+'">'+curText+'</div>'
								var textContent = $('.card-top-text');

								textContent.html(html)
							}
							uploadFZ()
							uploadColor()
							uploadCode()
						}
						function uploadCode() {
							uploadFZ()
							var code = $('.preview-card .card-top-text').html().toString()
							// console.log(code)
							$('#code-text').html(code)
						}
						function uploadFZ() {
							var fz  = $('.text-color-fz'),
								fzg = $('.text-color-set'),
								fzs = []
							fz.each(function (i,el) {
								fzs.push($(el).css('font-size'))
							})
							fzg.each(function (i,el) {
								$(el).css('font-size',fzs[i])
							})
						}
						function uploadColor() {
							var colorEl = $('.colorpicker'),
								colors = []

								colorEl.each(function (index,el) {
									colors.push($(el).css('background-color'))
								})
							var textEl = $('.text-color-set')
								textEl.each(function (index,el) {
									$(el).css('color',colors[index])
								})
								// console.log(colors)
						}
					})();
		});
		
		
	</script>

	
</body>
</html>